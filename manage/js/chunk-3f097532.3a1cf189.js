(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f097532"],{"1e29":function(e,t,a){"use strict";var r=a("b0df"),o=a.n(r);o.a},"6a23":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("楼花管理")]),a("a",{directives:[{name:"show",rawName:"v-show",value:e.canAdd,expression:"canAdd"}],attrs:{slot:"extra",role:"button"},on:{click:function(t){return t.preventDefault(),e.addPresale(t)}},slot:"extra"},[a("Icon",{attrs:{type:"md-add-circle",size:16}}),e._v("添加楼花\n        ")],1),a("Form",{ref:"formSearch",staticClass:"form-search",attrs:{"label-width":80,model:e.formSearch,inline:""},nativeOn:{submit:function(e){e.preventDefault()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchNow(t)}}},[a("FormItem",{attrs:{label:"所在国家",prop:"country_id"}},[a("Select",{on:{"on-change":e.loadCity},model:{value:e.formSearch.country_id,callback:function(t){e.$set(e.formSearch,"country_id",t)},expression:"formSearch.country_id"}},e._l(e.countryList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name_cn))])}),1)],1),a("FormItem",{attrs:{label:"所在城市",prop:"city_id"}},[a("Select",{model:{value:e.formSearch.city_id,callback:function(t){e.$set(e.formSearch,"city_id",t)},expression:"formSearch.city_id"}},e._l(e.cityList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name_cn))])}),1)],1),a("FormItem",{attrs:{label:"经纪人",prop:"broker_id"}},[a("Select",{model:{value:e.formSearch.broker_id,callback:function(t){e.$set(e.formSearch,"broker_id",t)},expression:"formSearch.broker_id"}},e._l(e.brokersList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name_cn))])}),1)],1),a("FormItem",{attrs:{label:"类型",prop:"type"}},[a("Select",{model:{value:e.formSearch.type,callback:function(t){e.$set(e.formSearch,"type",t)},expression:"formSearch.type"}},[a("Option",{attrs:{value:""}},[e._v("全部")]),a("Option",{attrs:{value:"1"}},[e._v("别墅")]),a("Option",{attrs:{value:"2"}},[e._v("公寓")]),a("Option",{attrs:{value:"3"}},[e._v("镇屋")])],1)],1),a("FormItem",{attrs:{label:"中文名称",prop:"name_cn"}},[a("Input",{attrs:{placeholder:"输入楼花中文名称"},model:{value:e.formSearch.name_cn,callback:function(t){e.$set(e.formSearch,"name_cn",t)},expression:"formSearch.name_cn"}})],1),a("FormItem",{attrs:{label:"英文名称",prop:"name_en"}},[a("Input",{attrs:{placeholder:"输入楼花英文名称"},model:{value:e.formSearch.name_en,callback:function(t){e.$set(e.formSearch,"name_en",t)},expression:"formSearch.name_en"}})],1),a("FormItem",{attrs:{"label-width":0}},[a("Button",{attrs:{type:"primary"},on:{click:e.searchNow}},[e._v("搜索")])],1),a("FormItem",{attrs:{"label-width":0}},[a("Button",{attrs:{type:"default"},on:{click:e.searchReset}},[e._v("重置")])],1)],1),a("tables",{ref:"tables",attrs:{loading:e.tableLoading,columns:e.columns},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),a("Page",{ref:"pager",staticStyle:{"margin-top":"15px"},attrs:{current:e.formSearch.page,total:e.total,"page-size":e.formSearch.pageSize,"page-size-opts":[20,40,60,100,500,1e3,5e3,1e4],"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}})],1),a("Modal",{attrs:{width:800,title:e.modalTitle,"mask-closable":!1},model:{value:e.showPresaleModal,callback:function(t){e.showPresaleModal=t},expression:"showPresaleModal"}},[a("Form",{ref:"formPresale",attrs:{"label-width":80,model:e.formPresale},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"所在国家",prop:"country_id",rules:{required:!0,message:"请选择国家",trigger:"change"}}},[a("Select",{on:{"on-change":e.loadCity},model:{value:e.formPresale.country_id,callback:function(t){e.$set(e.formPresale,"country_id",t)},expression:"formPresale.country_id"}},e._l(e.countryList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name_cn))])}),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"所在城市",prop:"city_id",rules:{required:!0,message:"请选择城市",trigger:"change"}}},[a("Select",{model:{value:e.formPresale.city_id,callback:function(t){e.$set(e.formPresale,"city_id",t)},expression:"formPresale.city_id"}},e._l(e.cityList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name_cn))])}),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"经纪人",prop:"broker_id",rules:{required:!0,message:"请选择经纪人",trigger:"change"}}},[a("Select",{model:{value:e.formPresale.broker_id,callback:function(t){e.$set(e.formPresale,"broker_id",t)},expression:"formPresale.broker_id"}},e._l(e.brokersList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name_cn))])}),1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"排序",prop:"sort"}},[a("Input",{attrs:{type:"number",placeholder:"不填将会自动排序"},model:{value:e.formPresale.sort,callback:function(t){e.$set(e.formPresale,"sort",t)},expression:"formPresale.sort"}})],1)],1)],1),a("FormItem",{attrs:{label:"楼花名称"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{"label-width":0,prop:"name_cn",rules:{required:!0,message:"请输入楼花名称(中文)",trigger:"change"}}},[a("Input",{attrs:{type:"text",placeholder:"中文楼花名称",maxlength:255},model:{value:e.formPresale.name_cn,callback:function(t){e.$set(e.formPresale,"name_cn",t)},expression:"formPresale.name_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{"label-width":0,prop:"name_en",rules:{required:!0,message:"请输入楼花姓名(英文)",trigger:"change"}}},[a("Input",{attrs:{type:"text",placeholder:"英文楼花名称",maxlength:255},model:{value:e.formPresale.name_en,callback:function(t){e.$set(e.formPresale,"name_en",t)},expression:"formPresale.name_en"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"楼花地址"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{"label-width":0,prop:"address_cn",rules:{required:!0,message:"请输入楼花地址(中文)",trigger:"change"}}},[a("Input",{attrs:{type:"text",placeholder:"中文楼花地址",maxlength:255},model:{value:e.formPresale.address_cn,callback:function(t){e.$set(e.formPresale,"address_cn",t)},expression:"formPresale.address_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{"label-width":0,prop:"address_en",rules:{required:!0,message:"请输入楼花地址(英文)",trigger:"change"}}},[a("Input",{attrs:{type:"text",placeholder:"英文楼花地址",maxlength:255},model:{value:e.formPresale.address_en,callback:function(t){e.$set(e.formPresale,"address_en",t)},expression:"formPresale.address_en"}})],1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("FormItem",{attrs:{label:"交付时间",prop:"delivery_time_cn"}},[a("Input",{attrs:{type:"text",placeholder:"输入中文交付时间",maxlength:255},model:{value:e.formPresale.delivery_time_cn,callback:function(t){e.$set(e.formPresale,"delivery_time_cn",t)},expression:"formPresale.delivery_time_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"9"}},[a("FormItem",{attrs:{"label-width":0,prop:"delivery_time_en"}},[a("Input",{attrs:{type:"text",placeholder:"输入英文交付时间",maxlength:255},model:{value:e.formPresale.delivery_time_en,callback:function(t){e.$set(e.formPresale,"delivery_time_en",t)},expression:"formPresale.delivery_time_en"}})],1)],1)],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"产权年限",prop:"property_years"}},[a("Input",{attrs:{type:"number",placeholder:"输入产权年限",maxlength:255},model:{value:e.formPresale.property_years,callback:function(t){e.$set(e.formPresale,"property_years",t)},expression:"formPresale.property_years"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"项目状态",prop:"project_status"}},[a("Select",{model:{value:e.formPresale.project_status,callback:function(t){e.$set(e.formPresale,"project_status",t)},expression:"formPresale.project_status"}},e._l(e.projectStatusList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.title))])}),1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"类型",prop:"type"}},[a("RadioGroup",{model:{value:e.formPresale.type,callback:function(t){e.$set(e.formPresale,"type",t)},expression:"formPresale.type"}},[a("Radio",{attrs:{label:"1"}},[e._v("别墅")]),a("Radio",{staticStyle:{"margin-left":"30px"},attrs:{label:"2"}},[e._v("公寓")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"楼层",prop:"floor"}},[a("Input",{attrs:{type:"number",placeholder:"输入楼层",maxlength:255},model:{value:e.formPresale.floor,callback:function(t){e.$set(e.formPresale,"floor",t)},expression:"formPresale.floor"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("FormItem",{attrs:{label:"房型",prop:"layout_cn"}},[a("Input",{attrs:{type:"text",placeholder:"输入中文房型",maxlength:255},model:{value:e.formPresale.layout_cn,callback:function(t){e.$set(e.formPresale,"layout_cn",t)},expression:"formPresale.layout_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"9"}},[a("FormItem",{attrs:{"label-width":0,prop:"layout_en"}},[a("Input",{attrs:{type:"text",placeholder:"输入英文房型",maxlength:255},model:{value:e.formPresale.layout_en,callback:function(t){e.$set(e.formPresale,"layout_en",t)},expression:"formPresale.layout_en"}})],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("FormItem",{attrs:{label:"室号",prop:"room_cn"}},[a("Input",{attrs:{type:"text",placeholder:"输入中文室号",maxlength:255},model:{value:e.formPresale.room_cn,callback:function(t){e.$set(e.formPresale,"room_cn",t)},expression:"formPresale.room_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"9"}},[a("FormItem",{attrs:{"label-width":0,prop:"room_en"}},[a("Input",{attrs:{type:"text",placeholder:"输入英文室号",maxlength:255},model:{value:e.formPresale.room_en,callback:function(t){e.$set(e.formPresale,"room_en",t)},expression:"formPresale.room_en"}})],1)],1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("FormItem",{attrs:{label:"面积",prop:"area_cn"}},[a("Input",{attrs:{type:"text",placeholder:"输入中文面积",maxlength:255},model:{value:e.formPresale.area_cn,callback:function(t){e.$set(e.formPresale,"area_cn",t)},expression:"formPresale.area_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"9"}},[a("FormItem",{attrs:{"label-width":0,prop:"area_en"}},[a("Input",{attrs:{type:"text",placeholder:"输入英文面积",maxlength:255},model:{value:e.formPresale.area_en,callback:function(t){e.$set(e.formPresale,"area_en",t)},expression:"formPresale.area_en"}})],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("FormItem",{attrs:{label:"价格",prop:"price_cn"}},[a("Input",{attrs:{type:"text",placeholder:"输入中文价格",maxlength:255},model:{value:e.formPresale.price_cn,callback:function(t){e.$set(e.formPresale,"price_cn",t)},expression:"formPresale.price_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"9"}},[a("FormItem",{attrs:{"label-width":0,prop:"price_en"}},[a("Input",{attrs:{type:"text",placeholder:"输入英文价格",maxlength:255},model:{value:e.formPresale.price_en,callback:function(t){e.$set(e.formPresale,"price_en",t)},expression:"formPresale.price_en"}})],1)],1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("FormItem",{attrs:{label:"阳台面积",prop:"balcony_area_cn"}},[a("Input",{attrs:{type:"text",placeholder:"输入中文阳台面积",maxlength:255},model:{value:e.formPresale.balcony_area_cn,callback:function(t){e.$set(e.formPresale,"balcony_area_cn",t)},expression:"formPresale.balcony_area_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"9"}},[a("FormItem",{attrs:{"label-width":0,prop:"balcony_area_en"}},[a("Input",{attrs:{type:"text",placeholder:"输入英文阳台面积",maxlength:255},model:{value:e.formPresale.balcony_area_en,callback:function(t){e.$set(e.formPresale,"balcony_area_en",t)},expression:"formPresale.balcony_area_en"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:e.saving},on:{click:e.handleSavePresale}},[e.saving?a("span",[e._v("保存中")]):a("span",[e._v("确定")])]),a("Button",{attrs:{type:"default"},on:{click:e.handleClosePresaleModal}},[e._v("关闭")])],1)],1),a("Modal",{attrs:{width:600,title:e.modalTitle,"mask-closable":!1},model:{value:e.showMediaModal,callback:function(t){e.showMediaModal=t},expression:"showMediaModal"}},[a("media-modal",{ref:"mediaModal"}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showMediaModal=!1}}},[e._v("关闭")])],1)],1),a("Modal",{attrs:{width:600,title:e.modalTitle,"mask-closable":!1},model:{value:e.showApartmentModal,callback:function(t){e.showApartmentModal=t},expression:"showApartmentModal"}},[a("apartment-modal",{ref:"apartmentModal"}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showApartmentModal=!1}}},[e._v("关闭")])],1)],1),a("Modal",{attrs:{width:700,title:e.modalTitle,"mask-closable":!1},model:{value:e.showTagsModal,callback:function(t){e.showTagsModal=t},expression:"showTagsModal"}},[a("tags-modal",{ref:"tagsModal"}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showTagsModal=!1}}},[e._v("关闭")])],1)],1)],1)},o=[],s=(a("7f7f"),a("cebc")),l=a("fa69"),n=a("2f62"),i=a("f121"),c=a("a0f0"),d=a("5289"),m=a("d25a"),u=a("8d20"),p=a("7e1e"),f=a("5841"),h=a("6b6c"),_=function(e){return e.service="presales",h["a"].request({url:"/",data:e,method:"post"})},y=function(e){return e.service="presales.add",h["a"].request({url:"/",data:e,method:"post"})},g=function(e){return e.service="presales.modify",h["a"].request({url:"/",data:e,method:"post"})},v=function(e){return e.service="presales.remove",h["a"].request({url:"/",data:e,method:"post"})},b=function(e){return e.service="presales.info",h["a"].request({url:"/",data:e,method:"post"})},P={components:{Tables:l["a"],Editor:c["a"],MediaModal:d["a"],ApartmentModal:m["a"],TagsModal:u["a"]},data:function(){var e=this;return{baseUrl:i["a"].baseUrl.pro,showPresaleModal:!1,showMediaModal:!1,showApartmentModal:!1,showTagsModal:!1,modalTitle:"",formSearch:{country_id:"",city_id:"",broker_id:"",is_hot:"",name_cn:"",name_en:"",page:1,pageSize:20},total:0,formPresale:{id:"",country_id:"",city_id:"",broker_id:"",name_cn:"",name_en:"",address_cn:"",address_en:"",delivery_time_cn:"",delivery_time_en:"",property_years:"",project_status:"0",type:"1",floor:"",layout_cn:"",layout_en:"",room_cn:"",room_en:"",area_cn:"",area_en:"",balcony_area_cn:"",balcony_area_en:"",price_cn:"",price_en:"",sort:""},saving:!1,tableLoading:!0,canAdd:!1,canModify:!1,canRemove:!1,canMedia:!1,columns:[{title:"ID",width:60,key:"ID"},{title:"中文名称",key:"name_cn",align:"center"},{title:"英文名称",key:"name_en",align:"center"},{title:"所在国家",key:"country",align:"center"},{title:"所在城市",key:"city",align:"center"},{title:"经纪人",key:"broker",align:"center"},{title:"交付时间",key:"delivery_time",align:"center"},{title:"产权年限",key:"property_years",align:"center"},{title:"项目状态",key:"project_status",align:"center"},{title:"类型",key:"type",align:"center"},{title:"楼层",key:"floor",align:"center"},{title:"室号",key:"room",align:"center"},{title:"房型",key:"layout",align:"center"},{title:"面积",key:"area",align:"center"},{title:"价格",key:"price",align:"center"},{title:"排序",key:"sort",align:"center"},{title:"添加时间",width:80,key:"time",align:"center"},{title:"操作",key:"handle",width:240,align:"center",className:"action-column",button:[function(t,a,r){return t("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){e.showTags(a)}}},"标签")},function(t,a,r){return t("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){e.showProcess(a)}}},"交易流程")},function(t,a,r){if(e.canMedia)return t("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){e.showMedia(a)}}},"媒体")},function(t,a,r){if(e.canModify)return t("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){e.modifyPresale(a)}}},"编辑")},function(t,a,r){if(e.canRemove)return t("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},style:{textAlign:"left"},on:{"on-ok":function(){e.removePresale(a).then(function(e){r.$emit("input",a.tableData.filter(function(e,t){return t!==a.row.initRowIndex}))})}}},[t("Button",{props:{type:"text",size:"small"},style:{color:"#ed4014"}},"删除")])}]}],tableData:[],countryList:[],cityList:[],brokersList:[],projectStatusList:[]}},methods:Object(s["a"])({},Object(n["b"])(["userCan","getConstants"]),{searchNow:function(){this.formSearch.page=1,this.loadPresales()},searchReset:function(){this.formSearch.name="",this.$refs.formSearch.resetFields(),this.loadPresales()},pageChange:function(e){this.formSearch.page=e,this.loadPresales()},pageSizeChange:function(e){this.formSearch.pageSize=e,this.loadPresales()},addPresale:function(){this.showPresaleModal=!0,this.modalTitle="添加楼花",this.$refs.formPresale.resetFields(),this.formPresale.id=""},handleSavePresale:function(){var e=this;this.$refs.formPresale.validate(function(t){t&&(e.saving=!0,""==e.formPresale.id?y(e.formPresale).then(function(t){e.saving=!1;var a=t.data;"y"===a.status?(e.$Message.success(a.msg),e.showPresaleModal=!1,e.$refs.formPresale.resetFields(),e.loadPresales()):e.$Message.error(a.msg)}).catch(function(t){e.saving=!1,e.$Message.error(t.message)}):g(e.formPresale).then(function(t){e.saving=!1;var a=t.data;"y"===a.status?(e.$Message.success(a.msg),e.showPresaleModal=!1,e.$refs.formPresale.resetFields(),e.loadPresales()):e.$Message.error(a.msg)}).catch(function(t){e.saving=!1,e.$Message.error(t)}))})},modifyPresale:function(e){var t=this;this.getPresaleInfo(e.row.id).then(function(e){t.showPresaleModal=!0,t.modalTitle="编辑楼花信息",t.formPresale=e.data,t.loadCity(e.data.country_id)})},handleClosePresaleModal:function(){this.showPresaleModal=!1,this.$refs.formPresale.resetFields()},setPresaleHot:function(e){var t=this;g({act:"hot",id:e}).then(function(e){var a=e.data;"y"===a.status?t.$Message.success(a.msg):t.$Message.error(a.msg)}).catch(function(e){t.$Message.error(e)})},getPresaleInfo:function(e){var t=this;return this.$Message.loading({content:"获取楼花信息...",duration:0}),new Promise(function(a,r){b({id:e}).then(function(e){t.$Message.destroy();var r=e.data;"y"===r.status?a(r):t.$Message.error(r.msg)}).catch(function(e){t.$Message.destroy()})})},removePresale:function(e){var t=this;this.$Message.loading({content:"删除中...",duration:0});var a=e.row.id;return new Promise(function(e,r){v({id:a}).then(function(a){t.$Message.destroy();var r=a.data;"y"===r.status?(t.$Message.success(r.msg),e()):t.$Message.error(r.msg)}).catch(function(e){t.$Message.destroy()})})},loadPresales:function(){var e=this;this.tableLoading=!0,_({search:this.formSearch}).then(function(t){e.tableLoading=!1;var a=t.data;"y"===a.status?(e.formSearch.pageSize=a.data.size,e.total=a.data.total,e.tableData=a.data.data):e.$Message.error(a.msg)}).catch(function(e){})},handleUploadSuccess:function(e,t){"y"===e.status?this.formPresale.avatar=e.data:this.$Message.error(e.msg)},handleUploadFormatError:function(e){this.$Notice.warning({title:"文件格式错误",desc:"文件 "+e.name+" 格式不正确, 仅支持pdf格式."})},handleUploadMaxSize:function(e){this.$Notice.warning({title:"文件大小超出限制",desc:"文件  "+e.name+" 太大了, 不能超过50M."})},removeAvatar:function(){this.formPresale.avatar={file:"",name:"",url:""}},loadCountry:function(){var e=this;Object(p["h"])({}).then(function(t){var a=t.data;"y"===a.status&&(e.countryList=a.data.data)}).catch(function(e){})},loadCity:function(e){var t=this;Object(p["f"])({search:{country_id:e}}).then(function(e){var a=e.data;"y"===a.status&&(t.cityList=a.data.data)}).catch(function(e){})},loadBrokers:function(){var e=this;Object(f["c"])({}).then(function(t){var a=t.data;"y"===a.status&&(e.brokersList=a.data.data)}).catch(function(e){})},showTags:function(e){this.showTagsModal=!0,this.modalTitle="「"+e.row.name_cn+"」标签",this.$refs.tagsModal.canAdd=this.canAdd,this.$refs.tagsModal.canModify=this.canModify,this.$refs.tagsModal.canRemove=this.canRemove,this.$refs.tagsModal.loadTags(e.row.id,2)},showMedia:function(e){this.showMediaModal=!0,this.modalTitle="「"+e.row.name_cn+"」媒体资源",this.$refs.mediaModal.loadMediaList(8,e.row.id)},showProcess:function(e){this.showMediaModal=!0,this.modalTitle="「"+e.row.name_cn+"」交易流程",this.$refs.mediaModal.loadMediaList(9,e.row.id)}}),mounted:function(){var e=this;this.loadPresales(),this.loadCountry(),this.loadBrokers(),this.userCan("Presales_Add").then(function(t){e.canAdd=t}),this.userCan("Presales_Modify").then(function(t){e.canModify=t}),this.userCan("Presales_Remove").then(function(t){e.canRemove=t}),this.userCan("Data_Media").then(function(t){e.canMedia=t}),this.getConstants().then(function(t){e.projectStatusList=t.PROJECT_STATUS})}},k=P,w=(a("1e29"),a("2877")),M=Object(w["a"])(k,r,o,!1,null,"7199f96d",null);t["default"]=M.exports},b0df:function(e,t,a){}}]);
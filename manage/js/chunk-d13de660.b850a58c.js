(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d13de660"],{"10c9":function(t,e,n){},"2f21":function(t,e,n){"use strict";var a=n("79e5");t.exports=function(t,e){return!!t&&a(function(){e?t.call(null,function(){},1):t.call(null)})}},"2f83":function(t,e,n){"use strict";var a=n("10c9"),o=n.n(a);o.a},"30d9":function(t,e,n){},4974:function(t,e,n){"use strict";var a=n("e86f"),o=n.n(a);o.a},5289:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("tables",{attrs:{size:"small",columns:t.mediaColumns,loading:t.tableLoading},model:{value:t.mediaList,callback:function(e){t.mediaList=e},expression:"mediaList"}}),t.canAdd?n("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",size:"small",icon:"md-cloud-upload"},on:{click:function(e){return e.preventDefault(),t.handleUploadShow(e)}}},[t._v("上传媒体")]):t._e(),n("Modal",{attrs:{title:"上传媒体","mask-closable":!1},model:{value:t.showUploadModal,callback:function(e){t.showUploadModal=e},expression:"showUploadModal"}},[n("Upload",{ref:"upload",attrs:{multiple:"",type:"drag",name:"files",action:t.baseUrl+"/upload/",format:["jpg","jpeg","png","gif","mp4","pdf"],"max-size":512e3,"on-success":t.handleUploadSuccess,"on-format-error":t.handleUploadFormatError,"on-exceeded-size":t.handleUploadMaxSize}},[n("div",{staticStyle:{padding:"20px 0"}},[n("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),n("p",[t._v("点击或拖拽文件以上传，仅支持jpg、jpeg、gif、png、mp4、pdf格式的文件，最大50M")])],1)]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"default"},on:{click:function(e){e.preventDefault(),t.showUploadModal=!1}}},[t._v("关闭")])],1)],1),n("Modal",{attrs:{title:"链接设置","mask-closable":!1},model:{value:t.showLinkModal,callback:function(e){t.showLinkModal=e},expression:"showLinkModal"}},[n("Form",{ref:"formLink",attrs:{"label-width":80,model:t.formLink},nativeOn:{submit:function(t){t.preventDefault()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSaveLink(e)}}},[n("FormItem",{attrs:{label:"链接类型",prop:"link_type"}},[n("RadioGroup",{model:{value:t.formLink.link_type,callback:function(e){t.$set(t.formLink,"link_type",e)},expression:"formLink.link_type"}},[n("Radio",{attrs:{label:"0"}},[t._v("无")]),n("Radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"1"}},[t._v("国家")]),n("Radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"2"}},[t._v("城市")]),n("Radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"3"}},[t._v("楼盘")])],1)],1),t.formLink.link_type>0?n("FormItem",{attrs:{label:"链接目标",prop:"link_url"}},[n("Input",{attrs:{placeholder:"输入目标ID"},model:{value:t.formLink.link_url,callback:function(e){t.$set(t.formLink,"link_url",e)},expression:"formLink.link_url"}})],1):t._e()],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary",loading:t.saving},on:{click:t.handleSaveLink}},[t.saving?n("span",[t._v("保存中")]):n("span",[t._v("确定")])]),n("Button",{attrs:{type:"default"},on:{click:function(e){t.showLinkModal=!1}}},[t._v("关闭")])],1)],1)],1)},o=[],i=n("cebc"),r=(n("55dd"),n("7f7f"),n("fa69")),s=n("2f62"),l=n("7e1e"),c=n("f121"),u={components:{Tables:r["a"]},data:function(){var t=this;return{baseUrl:c["a"].baseUrl.pro,showUploadModal:!1,showLinkModal:!1,tableLoading:!0,canAdd:!1,canRemove:!1,saving:!1,mtype:"",sourceId:"",formLink:{id:"",act:"link",link_type:"0",link_url:""},mediaColumns:[{title:"类型",width:60,key:"type_txt",align:"center"},{title:"名称",key:"name",align:"center",render:function(t,e){return t("a",{attrs:{href:e.row.file,target:"_blank"}},e.row.name)}},{title:"排序",key:"sort",align:"center",render:function(e,n){return e("Button",{props:{type:"text",size:"small"},on:{click:function(){t.modifySort(n)}}},n.row.sort)}},{title:"上传时间",width:80,key:"time",align:"center"},{title:"操作",key:"handle",align:"center",button:[function(e,n,a){if(1==n.row.type)return e("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){t.handleSetLink(n)}}},"链接")},function(e,n,a){if(t.canRemove)return e("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},style:{textAlign:"left"},on:{"on-ok":function(){t.handleRemoveMedia(n).then(function(t){a.$emit("input",n.tableData.filter(function(t,e){return e!==n.row.initRowIndex}))})}}},[e("Button",{props:{type:"text",size:"small"},style:{color:"#ed4014"}},"删除")])}]}],mediaList:[]}},methods:Object(i["a"])({},Object(s["b"])(["userCan"]),{loadMediaList:function(t,e){var n=this;t&&(this.mtype=t),e&&(this.sourceId=e),this.tableLoading=!0,Object(l["k"])({mtype:this.mtype,sourceId:this.sourceId}).then(function(t){n.tableLoading=!1;var e=t.data;"y"===e.status?n.mediaList=e.data:n.$Message.error(e.msg)}).catch(function(t){})},handleRemoveMedia:function(t){var e=this;this.$Message.loading({content:"删除中...",duration:0});var n=t.row.id;return new Promise(function(t,a){Object(l["u"])({id:n}).then(function(n){e.$Message.destroy();var a=n.data;"y"===a.status?(e.$Message.success(a.msg),t()):e.$Message.error(a.msg)}).catch(function(t){e.$Message.destroy()})})},handleUploadShow:function(){this.showUploadModal=!0,this.$refs.upload.clearFiles()},handleUploadSuccess:function(t,e){var n=this;"y"===t.status?Object(l["d"])({file:t.data.file,name:t.data.name,mtype:this.mtype,sourceId:this.sourceId}).then(function(t){var e=t.data;"y"===e.status?n.loadMediaList():n.$Message.error(e.msg)}).catch(function(t){}):this.$Message.error(t.msg)},handleUploadFormatError:function(t){this.$Notice.warning({title:"文件格式错误",desc:"文件 "+t.name+" 格式不正确, 仅支持png, jpg, jpeg, gif, mp4, pdf格式."})},handleUploadMaxSize:function(t){this.$Notice.warning({title:"文件大小超出限制",desc:"文件  "+t.name+" 太大了, 不能超过50M."})},modifySort:function(t){var e=this,n=t.row.sort;this.$Modal.confirm({render:function(e){return e("Input",{props:{value:t.row.sort,autofocus:!0,placeholder:"请输入排序"},on:{input:function(t){n=t}}})},onOk:function(){""==n?e.$Message.warning("请输入排序"):(e.$Message.loading({content:"保存中...",duration:0}),Object(l["p"])({id:t.row.id,sort:n,act:"sort"}).then(function(t){e.$Message.destroy();var n=t.data;"y"===n.status?(e.$Message.success(n.msg),e.loadMediaList()):e.$Message.error(n.msg)}).catch(function(t){e.$Message.destroy()}))}})},handleSetLink:function(t){this.showLinkModal=!0,this.formLink.id=t.row.id,this.formLink.link_type=t.row.link_type,this.formLink.link_url=t.row.link_url},handleSaveLink:function(){var t=this;this.saving=!0,Object(l["p"])(this.formLink).then(function(e){t.saving=!1;var n=e.data;"y"===n.status?(t.showLinkModal=!1,t.$Message.success(n.msg),t.loadMediaList()):t.$Message.error(n.msg)}).catch(function(e){t.saving=!1})}}),mounted:function(){var t=this;this.userCan("Data_MediaAdd").then(function(e){t.canAdd=e}),this.userCan("Data_MediaRemove").then(function(e){t.canRemove=e})}},d=u,h=(n("2f83"),n("2877")),f=Object(h["a"])(d,a,o,!1,null,"2d910b78",null),p=f.exports;e["a"]=p},"55dd":function(t,e,n){"use strict";var a=n("5ca1"),o=n("d8e8"),i=n("4bf8"),r=n("79e5"),s=[].sort,l=[1,2,3];a(a.P+a.F*(r(function(){l.sort(void 0)})||!r(function(){l.sort(null)})||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),o(t))}})},"7e1e":function(t,e,n){"use strict";n.d(e,"h",function(){return o}),n.d(e,"i",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"n",function(){return s}),n.d(e,"s",function(){return l}),n.d(e,"f",function(){return c}),n.d(e,"g",function(){return u}),n.d(e,"a",function(){return d}),n.d(e,"m",function(){return h}),n.d(e,"r",function(){return f}),n.d(e,"j",function(){return p}),n.d(e,"c",function(){return m}),n.d(e,"o",function(){return v}),n.d(e,"t",function(){return y}),n.d(e,"k",function(){return g}),n.d(e,"d",function(){return k}),n.d(e,"p",function(){return b}),n.d(e,"u",function(){return w}),n.d(e,"l",function(){return x}),n.d(e,"e",function(){return C}),n.d(e,"q",function(){return _}),n.d(e,"v",function(){return M});var a=n("6b6c"),o=function(t){return t.service="data.country",a["a"].request({url:"/",data:t,method:"post"})},i=function(t){return t.service="data.countryInfo",a["a"].request({url:"/",data:t,method:"post"})},r=function(t){return t.service="data.countryAdd",a["a"].request({url:"/",data:t,method:"post"})},s=function(t){return t.service="data.countryModify",a["a"].request({url:"/",data:t,method:"post"})},l=function(t){return t.service="data.countryRemove",a["a"].request({url:"/",data:t,method:"post"})},c=function(t){return t.service="data.city",a["a"].request({url:"/",data:t,method:"post"})},u=function(t){return t.service="data.cityInfo",a["a"].request({url:"/",data:t,method:"post"})},d=function(t){return t.service="data.cityAdd",a["a"].request({url:"/",data:t,method:"post"})},h=function(t){return t.service="data.cityModify",a["a"].request({url:"/",data:t,method:"post"})},f=function(t){return t.service="data.cityRemove",a["a"].request({url:"/",data:t,method:"post"})},p=function(t){return t.service="data.lang",a["a"].request({url:"/",data:t,method:"post"})},m=function(t){return t.service="data.langAdd",a["a"].request({url:"/",data:t,method:"post"})},v=function(t){return t.service="data.langModify",a["a"].request({url:"/",data:t,method:"post"})},y=function(t){return t.service="data.langRemove",a["a"].request({url:"/",data:t,method:"post"})},g=function(t){return t.service="data.media",a["a"].request({url:"/",data:t,method:"post"})},k=function(t){return t.service="data.mediaAdd",a["a"].request({url:"/",data:t,method:"post"})},b=function(t){return t.service="data.mediaModify",a["a"].request({url:"/",data:t,method:"post"})},w=function(t){return t.service="data.mediaRemove",a["a"].request({url:"/",data:t,method:"post"})},x=function(t){return t.service="data.school",a["a"].request({url:"/",data:t,method:"post"})},C=function(t){return t.service="data.schoolAdd",a["a"].request({url:"/",data:t,method:"post"})},_=function(t){return t.service="data.schoolModify",a["a"].request({url:"/",data:t,method:"post"})},M=function(t){return t.service="data.schoolRemove",a["a"].request({url:"/",data:t,method:"post"})}},e86f:function(t,e,n){},fa69:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.searchable&&"top"===t.searchPlace?n("div",{staticClass:"search-con search-con-top"},[n("Select",{staticClass:"search-col",model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},t._l(t.columns,function(e){return"handle"!==e.key?n("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))]):t._e()}),1),n("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"输入关键字搜索"},on:{"on-change":t.handleClear},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),n("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.handleSearch}},[n("Icon",{attrs:{type:"md-search",size:"15"}}),t._v("  搜索")],1)],1):t._e(),n("Table",{ref:"tablesMain",attrs:{data:t.insideTableData,columns:t.insideColumns,stripe:t.stripe,border:t.border,"show-header":t.showHeader,width:t.width,height:t.height,loading:t.loading,"disabled-hover":t.disabledHover,"highlight-row":t.highlightRow,"row-class-name":t.rowClassName,size:t.size,"no-data-text":t.noDataText,"no-filtered-data-text":t.noFilteredDataText},on:{"on-current-change":t.onCurrentChange,"on-select":t.onSelect,"on-select-cancel":t.onSelectCancel,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectionChange,"on-sort-change":t.onSortChange,"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDblclick,"on-expand":t.onExpand}},[t._t("header",null,{slot:"header"}),t._t("footer",null,{slot:"footer"}),t._t("loading",null,{slot:"loading"})],2),t.searchable&&"bottom"===t.searchPlace?n("div",{staticClass:"search-con search-con-top"},[n("Select",{staticClass:"search-col",model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},t._l(t.columns,function(e){return"handle"!==e.key?n("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))]):t._e()}),1),n("Input",{staticClass:"search-input",attrs:{placeholder:"输入关键字搜索"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),n("Button",{staticClass:"search-btn",attrs:{type:"primary"}},[n("Icon",{attrs:{type:"search"}}),t._v("  搜索")],1)],1):t._e(),n("a",{staticStyle:{display:"none",width:"0px",height:"0px"},attrs:{id:"hrefToExportTable"}})],1)},o=[],i=(n("ac6a"),n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tables-edit-outer"},[t.isEditting?n("div",{staticClass:"tables-editting-con"},[n("Input",{staticClass:"tables-edit-input",attrs:{value:t.value},on:{input:t.handleInput}}),n("Button",{staticStyle:{padding:"6px 4px"},attrs:{type:"text"},on:{click:t.saveEdit}},[n("Icon",{attrs:{type:"md-checkmark"}})],1),n("Button",{staticStyle:{padding:"6px 4px"},attrs:{type:"text"},on:{click:t.canceltEdit}},[n("Icon",{attrs:{type:"md-close"}})],1)],1):n("div",{staticClass:"tables-edit-con"},[n("span",{staticClass:"value-con"},[t._v(t._s(t.value))]),t.editable?n("Button",{staticClass:"tables-edit-btn",staticStyle:{padding:"2px 4px"},attrs:{type:"text"},on:{click:t.startEdit}},[n("Icon",{attrs:{type:"md-create"}})],1):t._e()],1)])}),r=[],s={name:"TablesEdit",props:{value:[String,Number],edittingCellId:String,params:Object,editable:Boolean},computed:{isEditting:function(){return this.edittingCellId==="editting-".concat(this.params.index,"-").concat(this.params.column.key)}},methods:{handleInput:function(t){this.$emit("input",t)},startEdit:function(){this.$emit("on-start-edit",this.params)},saveEdit:function(){this.$emit("on-save-edit",this.params)},canceltEdit:function(){this.$emit("on-cancel-edit",this.params)}}},l=s,c=(n("4974"),n("2877")),u=Object(c["a"])(l,i,r,!1,null,null,null),d=u.exports,h={delete:function(t,e,n){return t("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},on:{"on-ok":function(){n.$emit("on-delete",e),n.$emit("input",e.tableData.filter(function(t,n){return n!==e.row.initRowIndex}))}}},[t("Button",{props:{type:"text",ghost:!0}},[t("Icon",{props:{type:"md-trash",size:18,color:"#000000"}})])])}},f=h,p=(n("30d9"),{name:"Tables",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},size:String,width:{type:[Number,String]},height:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default:function(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:"top"}},data:function(){return{insideColumns:[],insideTableData:[],edittingCellId:"",edittingText:"",searchValue:"",searchKey:""}},methods:{suportEdit:function(t,e){var n=this;return t.render=function(t,e){return t(d,{props:{params:e,value:n.insideTableData[e.index][e.column.key],edittingCellId:n.edittingCellId,editable:n.editable},on:{input:function(t){n.edittingText=t},"on-start-edit":function(t){n.edittingCellId="editting-".concat(t.index,"-").concat(t.column.key),n.$emit("on-start-edit",t)},"on-cancel-edit":function(t){n.edittingCellId="",n.$emit("on-cancel-edit",t)},"on-save-edit":function(t){n.value[t.row.initRowIndex][t.column.key]=n.edittingText,n.$emit("input",n.value),n.$emit("on-save-edit",Object.assign(t,{value:n.edittingText})),n.edittingCellId=""}}})},t},surportHandle:function(t){var e=this,n=t.options||[],a=[];n.forEach(function(t){f[t]&&a.push(f[t])});var o=t.button?[].concat(a,t.button):a;return t.render=function(t,n){return n.tableData=e.value,t("div",o.map(function(a){return a(t,n,e)}))},t},handleColumns:function(t){var e=this;this.insideColumns=t.map(function(t,n){var a=t;return a.editable&&(a=e.suportEdit(a,n)),"handle"===a.key&&(a=e.surportHandle(a)),a})},setDefaultSearchKey:function(){this.searchKey="handle"!==this.columns[0].key?this.columns[0].key:this.columns.length>1?this.columns[1].key:""},handleClear:function(t){""===t.target.value&&(this.insideTableData=this.value)},handleSearch:function(){var t=this;this.insideTableData=this.value.filter(function(e){return e[t.searchKey].indexOf(t.searchValue)>-1})},handleTableData:function(){this.insideTableData=this.value.map(function(t,e){var n=t;return n.initRowIndex=e,n})},exportCsv:function(t){this.$refs.tablesMain.exportCsv(t)},clearCurrentRow:function(){this.$refs.talbesMain.clearCurrentRow()},onCurrentChange:function(t,e){this.$emit("on-current-change",t,e)},onSelect:function(t,e){this.$emit("on-select",t,e)},onSelectCancel:function(t,e){this.$emit("on-select-cancel",t,e)},onSelectAll:function(t){this.$emit("on-select-all",t)},onSelectionChange:function(t){this.$emit("on-selection-change",t)},onSortChange:function(t,e,n){this.$emit("on-sort-change",t,e,n)},onFilterChange:function(t){this.$emit("on-filter-change",t)},onRowClick:function(t,e){this.$emit("on-row-click",t,e)},onRowDblclick:function(t,e){this.$emit("on-row-dblclick",t,e)},onExpand:function(t,e){this.$emit("on-expand",t,e)}},watch:{columns:function(t){this.handleColumns(t),this.setDefaultSearchKey()},value:function(t){this.handleTableData(),this.searchable&&this.handleSearch()}},mounted:function(){this.handleColumns(this.columns),this.setDefaultSearchKey(),this.handleTableData()}}),m=p,v=Object(c["a"])(m,a,o,!1,null,null,null),y=v.exports;e["a"]=y}}]);
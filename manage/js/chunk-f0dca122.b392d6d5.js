(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0dca122"],{"151c":function(e,t,a){},5841:function(e,t,a){"use strict";a.d(t,"c",function(){return r}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return s}),a.d(t,"e",function(){return i}),a.d(t,"b",function(){return l});var n=a("6b6c"),r=function(e){return e.service="brokers",n["a"].request({url:"/",data:e,method:"post"})},o=function(e){return e.service="brokers.add",n["a"].request({url:"/",data:e,method:"post"})},s=function(e){return e.service="brokers.modify",n["a"].request({url:"/",data:e,method:"post"})},i=function(e){return e.service="brokers.remove",n["a"].request({url:"/",data:e,method:"post"})},l=function(e){return e.service="brokers.info",n["a"].request({url:"/",data:e,method:"post"})}},8966:function(e,t,a){"use strict";a.d(t,"e",function(){return r}),a.d(t,"b",function(){return o}),a.d(t,"g",function(){return s}),a.d(t,"i",function(){return i}),a.d(t,"d",function(){return l}),a.d(t,"c",function(){return c}),a.d(t,"a",function(){return u}),a.d(t,"f",function(){return d}),a.d(t,"h",function(){return m});var n=a("6b6c"),r=function(e){return e.service="buildings",n["a"].request({url:"/",data:e,method:"post"})},o=function(e){return e.service="buildings.add",n["a"].request({url:"/",data:e,method:"post"})},s=function(e){return e.service="buildings.modify",n["a"].request({url:"/",data:e,method:"post"})},i=function(e){return e.service="buildings.remove",n["a"].request({url:"/",data:e,method:"post"})},l=function(e){return e.service="buildings.info",n["a"].request({url:"/",data:e,method:"post"})},c=function(e){return e.service="buildings.apartments",n["a"].request({url:"/",data:e,method:"post"})},u=function(e){return e.service="buildings.apartmentAdd",n["a"].request({url:"/",data:e,method:"post"})},d=function(e){return e.service="buildings.apartmentModify",n["a"].request({url:"/",data:e,method:"post"})},m=function(e){return e.service="buildings.apartmentRemove",n["a"].request({url:"/",data:e,method:"post"})}},"8d20":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("tables",{attrs:{size:"small",columns:e.columns,loading:e.tableLoading},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),e.canAdd?a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",size:"small",icon:"md-add-circle"},on:{click:function(t){return t.preventDefault(),e.handleAdd(t)}}},[e._v("添加标签")]):e._e(),a("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1},model:{value:e.showTagsModal,callback:function(t){e.showTagsModal=t},expression:"showTagsModal"}},[a("Form",{ref:"formTags",attrs:{"label-width":80,model:e.form},nativeOn:{submit:function(e){e.preventDefault()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSaveTags(t)}}},[a("FormItem",{attrs:{label:"图标",prop:"icon.url",rules:{required:!0,message:"请上传图标",trigger:"change"}}},[a("div",{staticClass:"d-flex"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.form.icon.url.length>0,expression:"form.icon.url.length > 0"}],staticClass:"img-option",style:"background-image:url("+e.form.icon.url+")",on:{click:function(t){return t.preventDefault(),e.removeIcon(t)}}},[a("span",[e._v("删除")])]),a("Upload",{attrs:{action:e.baseUrl+"/upload/",name:"files","show-upload-list":!1,format:["jpg","jpeg","png","gif"],"max-size":2048,"on-success":e.handleUploadSuccess,"on-format-error":e.handleUploadFormatError,"on-exceeded-size":e.handleUploadMaxSize}},[a("Button",{attrs:{icon:"md-cloud-upload",size:"small"}},[e._v("上传")])],1)],1)]),a("FormItem",{attrs:{label:"名称"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{"label-width":0,prop:"name_cn",rules:{required:!0,message:"请输入标签名称(中文)",trigger:"change"}}},[a("Input",{attrs:{type:"text",placeholder:"中文",maxlength:255},model:{value:e.form.name_cn,callback:function(t){e.$set(e.form,"name_cn",t)},expression:"form.name_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{"label-width":0,prop:"name_en",rules:{required:!0,message:"请输入标签名称(英文)",trigger:"change"}}},[a("Input",{attrs:{type:"text",placeholder:"英文",maxlength:255},model:{value:e.form.name_en,callback:function(t){e.$set(e.form,"name_en",t)},expression:"form.name_en"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"描述(中文)",prop:"intro_cn"}},[a("Input",{attrs:{type:"text",placeholder:"中文",maxlength:255},model:{value:e.form.intro_cn,callback:function(t){e.$set(e.form,"intro_cn",t)},expression:"form.intro_cn"}})],1),a("FormItem",{attrs:{label:"描述(英文)",prop:"intro_en"}},[a("Input",{attrs:{type:"text",placeholder:"英文",maxlength:255},model:{value:e.form.intro_en,callback:function(t){e.$set(e.form,"intro_en",t)},expression:"form.intro_en"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:e.saving},on:{click:e.handleSaveTags}},[e.saving?a("span",[e._v("保存中")]):a("span",[e._v("确定")])]),a("Button",{attrs:{type:"default"},on:{click:e.handleCloseTagsModal}},[e._v("关闭")])],1)],1)],1)},r=[],o=(a("7f7f"),a("fa69")),s=a("f121"),i=a("6b6c"),l=function(e){return e.service="tags",i["a"].request({url:"/",data:e,method:"post"})},c=function(e){return e.service="tags.add",i["a"].request({url:"/",data:e,method:"post"})},u=function(e){return e.service="tags.modify",i["a"].request({url:"/",data:e,method:"post"})},d=function(e){return e.service="tags.remove",i["a"].request({url:"/",data:e,method:"post"})},m=function(e){return e.service="tags.info",i["a"].request({url:"/",data:e,method:"post"})},f={components:{Tables:o["a"]},data:function(){var e=this;return{baseUrl:s["a"].baseUrl.pro,showTagsModal:!1,showMediaModal:!1,modalTitle:"",form:{id:"",type:"1",source_id:"",name_cn:"",name_en:"",intro_cn:"",intro_en:"",icon:{url:"",name:"",file:""}},saving:!1,tableLoading:!0,canAdd:!1,canModify:!1,canRemove:!1,columns:[{title:"图标",width:66,align:"center",key:"icon",render:function(e,t){return e("img",{style:{width:"50px",height:"auto"},attrs:{src:t.row.icon}})}},{title:"中文名称",key:"name_cn",align:"center"},{title:"英文名称",key:"name_en",align:"center"},{title:"描述",key:"intro",align:"center"},{title:"添加时间",width:80,key:"time",align:"center"},{title:"操作",key:"handle",width:96,align:"center",className:"action-column",button:[function(t,a,n){if(e.canModify)return t("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){e.modifyTag(a)}}},"编辑")},function(t,a,n){if(e.canRemove)return t("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},style:{textAlign:"left"},on:{"on-ok":function(){e.removeTag(a).then(function(e){n.$emit("input",a.tableData.filter(function(e,t){return t!==a.row.initRowIndex}))})}}},[t("Button",{props:{type:"text",size:"small"},style:{color:"#ed4014"}},"删除")])}]}],tableData:[]}},methods:{handleAdd:function(){this.showTagsModal=!0,this.modalTitle="添加标签",this.$refs.formTags.resetFields(),this.form.id=""},handleSaveTags:function(){var e=this;this.$refs.formTags.validate(function(t){t&&(e.saving=!0,""==e.form.id?c(e.form).then(function(t){e.saving=!1;var a=t.data;"y"===a.status?(e.$Message.success(a.msg),e.showTagsModal=!1,e.$refs.formTags.resetFields(),e.loadTags()):e.$Message.error(a.msg)}).catch(function(t){e.saving=!1,e.$Message.error(t.message)}):u(e.form).then(function(t){e.saving=!1;var a=t.data;"y"===a.status?(e.$Message.success(a.msg),e.showTagsModal=!1,e.$refs.formTags.resetFields(),e.loadTags()):e.$Message.error(a.msg)}).catch(function(t){e.saving=!1,e.$Message.error(t)}))})},modifyTag:function(e){var t=this;this.getTagInfo(e.row.id).then(function(e){t.showTagsModal=!0,t.modalTitle="编辑标签信息",t.form=e.data})},handleCloseTagsModal:function(){this.showTagsModal=!1,this.$refs.formTags.resetFields()},getTagInfo:function(e){var t=this;return this.$Message.loading({content:"获取标签信息...",duration:0}),new Promise(function(a,n){m({id:e}).then(function(e){t.$Message.destroy();var n=e.data;"y"===n.status?a(n):t.$Message.error(n.msg)}).catch(function(e){t.$Message.destroy()})})},removeTag:function(e){var t=this;this.$Message.loading({content:"删除中...",duration:0});var a=e.row.id;return new Promise(function(e,n){d({id:a}).then(function(a){t.$Message.destroy();var n=a.data;"y"===n.status?(t.$Message.success(n.msg),e()):t.$Message.error(n.msg)}).catch(function(e){t.$Message.destroy()})})},loadTags:function(e,t){var a=this;e&&(this.form.source_id=e),t&&(this.form.type=t),this.tableLoading=!0,l({source_id:this.form.source_id,type:this.form.type}).then(function(e){a.tableLoading=!1;var t=e.data;"y"===t.status?a.tableData=t.data:a.$Message.error(t.msg)}).catch(function(e){})},handleUploadSuccess:function(e,t){"y"===e.status?this.form.icon=e.data:this.$Message.error(e.msg)},handleUploadFormatError:function(e){this.$Notice.warning({title:"文件格式错误",desc:"文件 "+e.name+" 格式不正确, 仅支持png, jpg, jpeg, gif格式."})},handleUploadMaxSize:function(e){this.$Notice.warning({title:"文件大小超出限制",desc:"文件  "+e.name+" 太大了, 不能超过2M."})},removeIcon:function(){this.form.icon={file:"",name:"",url:""}}}},p=f,g=(a("edc0"),a("2877")),h=Object(g["a"])(p,n,r,!1,null,"5b891013",null),v=h.exports;t["a"]=v},d25a:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("tables",{attrs:{size:"small",columns:e.columns,loading:e.tableLoading},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),e.canAdd?a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",size:"small",icon:"md-add-circle"},on:{click:function(t){return t.preventDefault(),e.handleApartmentShow(t)}}},[e._v("添加户型")]):e._e(),a("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1},model:{value:e.showApartmentModal,callback:function(t){e.showApartmentModal=t},expression:"showApartmentModal"}},[a("Form",{ref:"form",attrs:{"label-width":80,model:e.form},nativeOn:{submit:function(e){e.preventDefault()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSave(t)}}},[a("FormItem",{attrs:{label:"户型名称"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{"label-width":0,prop:"name_cn",rules:{required:!0,message:"请输入户型名称(中文)",trigger:"change"}}},[a("Input",{attrs:{type:"text",placeholder:"中文",maxlength:255},model:{value:e.form.name_cn,callback:function(t){e.$set(e.form,"name_cn",t)},expression:"form.name_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{"label-width":0,prop:"name_en",rules:{required:!0,message:"请输入户型名称(英文)",trigger:"change"}}},[a("Input",{attrs:{type:"text",placeholder:"英文",maxlength:255},model:{value:e.form.name_en,callback:function(t){e.$set(e.form,"name_en",t)},expression:"form.name_en"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"户型面积"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{"label-width":0,prop:"area_cn"}},[a("Input",{attrs:{type:"text",placeholder:"中文",maxlength:255},model:{value:e.form.area_cn,callback:function(t){e.$set(e.form,"area_cn",t)},expression:"form.area_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{"label-width":0,prop:"area_en"}},[a("Input",{attrs:{type:"text",placeholder:"英文",maxlength:255},model:{value:e.form.area_en,callback:function(t){e.$set(e.form,"area_en",t)},expression:"form.area_en"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"户型价格"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{"label-width":0,prop:"price_cn"}},[a("Input",{attrs:{type:"text",placeholder:"中文",maxlength:255},model:{value:e.form.price_cn,callback:function(t){e.$set(e.form,"price_cn",t)},expression:"form.price_cn"}})],1)],1),a("Col",{attrs:{span:"1"}},[e._v(" ")]),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{"label-width":0,prop:"price_en"}},[a("Input",{attrs:{type:"text",placeholder:"英文",maxlength:255},model:{value:e.form.price_en,callback:function(t){e.$set(e.form,"price_en",t)},expression:"form.price_en"}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:e.saving},on:{click:e.handleSave}},[e.saving?a("span",[e._v("保存中")]):a("span",[e._v("确定")])]),a("Button",{attrs:{type:"default"},on:{click:function(t){t.preventDefault(),e.showApartmentModal=!1}}},[e._v("关闭")])],1)],1)],1)},r=[],o=a("fa69"),s=(a("2f62"),a("8966")),i={components:{Tables:o["a"]},data:function(){var e=this;return{showApartmentModal:!1,tableLoading:!0,saving:!1,canAdd:!1,canRemove:!1,modalTitle:"",form:{id:"",building_id:"",name_cn:"",name_en:"",area_cn:"",area_en:"",price_cn:"",price_en:""},columns:[{title:"户型名称",key:"name_cn",align:"center"},{title:"面积",key:"area_cn",align:"center"},{title:"价格",key:"price_cn",align:"center"},{title:"操作",key:"handle",width:100,align:"center",button:[function(t,a,n){if(e.canModify)return t("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){e.handleModify(a)}}},"编辑")},function(t,a,n){if(e.canRemove)return t("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},style:{textAlign:"left"},on:{"on-ok":function(){e.handleRemove(a).then(function(e){n.$emit("input",a.tableData.filter(function(e,t){return t!==a.row.initRowIndex}))})}}},[t("Button",{props:{type:"text",size:"small"},style:{color:"#ed4014"}},"删除")])}]}],tableData:[]}},methods:{loadApartments:function(e){var t=this;e&&(this.form.building_id=e),this.tableLoading=!0,Object(s["c"])({building_id:this.form.building_id}).then(function(e){t.tableLoading=!1;var a=e.data;"y"===a.status?t.tableData=a.data:t.$Message.error(a.msg)}).catch(function(e){})},handleApartmentShow:function(){this.showApartmentModal=!0,this.modalTitle="添加户型",this.$refs.form.resetFields(),this.form.id=""},handleSave:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.saving=!0,""==e.form.id?Object(s["a"])(e.form).then(function(t){e.saving=!1;var a=t.data;"y"===a.status?(e.$Message.success(a.msg),e.showApartmentModal=!1,e.$refs.form.resetFields(),e.loadApartments()):e.$Message.error(a.msg)}).catch(function(t){e.saving=!1,e.$Message.error(t.message)}):Object(s["f"])(e.form).then(function(t){e.saving=!1;var a=t.data;"y"===a.status?(e.$Message.success(a.msg),e.showApartmentModal=!1,e.$refs.form.resetFields(),e.loadApartments()):e.$Message.error(a.msg)}).catch(function(t){e.saving=!1,e.$Message.error(t)}))})},handleRemove:function(e){var t=this;this.$Message.loading({content:"删除中...",duration:0});var a=e.row.id;return new Promise(function(e,n){Object(s["h"])({id:a}).then(function(a){t.$Message.destroy();var n=a.data;"y"===n.status?(t.$Message.success(n.msg),e()):t.$Message.error(n.msg)}).catch(function(e){t.$Message.destroy()})})},handleModify:function(e){this.showApartmentModal=!0,this.modalTitle="编辑户型",this.form=e.row}}},l=i,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null),d=u.exports;t["a"]=d},edc0:function(e,t,a){"use strict";var n=a("151c"),r=a.n(n);r.a}}]);